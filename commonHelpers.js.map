{"version":3,"file":"commonHelpers.js","sources":["../src/js/cat-api.js","../src/index.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.headers.common['x-api-key'] =\n  'live_jp4MAa6Q05x6bPwskekDsJZfzqCtg2YV4GCjsqnuUaFRE2dglgAL3yLtQhvHdwUY';\n\nexport async function fetchBreeds() {\n  return axios.get('https://api.thecatapi.com/v1/breeds').then(res => res.data);\n}\n\nexport async function fetchCatByBreed(breedId) {\n  return axios\n    .get(`https://api.thecatapi.com/v1/images/search?breed_ids=${breedId}`)\n    .then(res => res.data[0]);\n}\n","import { fetchBreeds, fetchCatByBreed } from './js/cat-api.js';\nimport SlimSelect from 'slim-select';\nimport iziToast from 'izitoast';\n\nimport 'izitoast/dist/css/iziToast.min.css';\nimport '../node_modules/slim-select/dist/slimselect.css';\n\n/**\n * GET DOM ELEMENTS\n * @type {Element}\n */\nconst selectRef = document.querySelector('.breed-select');\nconst catInfoRef = document.querySelector('.cat-info');\nconst loaderRef = document.querySelector('.loader');\n\n/**\n * create new instance of SlimSelect\n * @type {SlimSelect}\n */\nconst select = new SlimSelect({\n  select: selectRef,\n});\nselect.disable();\n\ndrawOptions();\n\n/**\n * Draw options in select\n */\nasync function drawOptions() {\n  const breeds = await fetchBreeds()\n    .then(data => {\n      const breeds = {};\n      data.map(breed => (breeds[breed.name] = breed.id));\n      return breeds;\n    })\n    .catch(error);\n  const options = [\n    { text: 'Chose cat breed', value: 'empty' },\n    ...Object.keys(breeds).map(breed => {\n      return { text: breed, value: breeds[breed] };\n    }),\n  ];\n  select.setData(options);\n  select.enable();\n  showLoader(false);\n}\n\n/**\n * Add event listener to select\n */\nselectRef.addEventListener('change', async e => {\n  if (e.target.value === 'empty') {\n    catInfoRef.innerHTML = '';\n    return;\n  }\n\n  showLoader();\n  await fetchCatByBreed(e.target.value)\n    .then(makeCatsMarkup)\n    .catch(error)\n    .finally(() => showLoader(false));\n});\n\n/**\n * Show error message\n * @param err\n */\nfunction error(err) {\n  iziToast.error({\n    title: 'Error',\n    titleColor: 'red',\n    message: err.message,\n    messageColor: 'red',\n    position: 'topRight',\n    close: false,\n    closeOnClick: true,\n    progressBarColor: 'red',\n    icon: null,\n    timeout: 1500,\n  });\n  catInfoRef.innerHTML = '';\n}\n\n/**\n * Make markup for cat info\n * @param data\n */\nfunction makeCatsMarkup(data) {\n  const imgUrl = data.url;\n  const breedInfo = data.breeds[0];\n  catInfoRef.innerHTML = `\n    <h2 class='cat-title'>${breedInfo.name}</h2>\n    <div class=\"cat-info-box\">\n      <img src=\"${imgUrl}\" alt=\"${breedInfo.name}\" width='800'>\n      <div class=\"cat-info-text\">\n        <p>${breedInfo.description}</p>\n        <ul>\n          <li><b>Origin:</b> ${breedInfo.origin}</li>\n          <li><b>Life Span:</b> ${breedInfo.life_span}</li>\n          <li><b>Temperament:</b> ${breedInfo.temperament}</li>\n        </ul>\n      </div>\n    </div>\n  `;\n}\n\n/**\n * Show/hide loader\n * @param bool\n */\nfunction showLoader(bool = true) {\n  loaderRef.style.display = bool ? 'block' : 'none';\n}\n"],"names":["axios","fetchBreeds","res","fetchCatByBreed","breedId","selectRef","catInfoRef","loaderRef","select","SlimSelect","drawOptions","breeds","data","breed","error","options","showLoader","e","makeCatsMarkup","err","iziToast","imgUrl","breedInfo","bool"],"mappings":"owBAEAA,EAAM,SAAS,QAAQ,OAAO,aAC5B,wEAEK,eAAeC,GAAc,CAClC,OAAOD,EAAM,IAAI,qCAAqC,EAAE,KAAKE,GAAOA,EAAI,IAAI,CAC9E,CAEO,eAAeC,EAAgBC,EAAS,CAC7C,OAAOJ,EACJ,IAAI,wDAAwDI,GAAS,EACrE,KAAKF,GAAOA,EAAI,KAAK,EAAE,CAC5B,CCFA,MAAMG,EAAY,SAAS,cAAc,eAAe,EAClDC,EAAa,SAAS,cAAc,WAAW,EAC/CC,EAAY,SAAS,cAAc,SAAS,EAM5CC,EAAS,IAAIC,EAAW,CAC5B,OAAQJ,CACV,CAAC,EACDG,EAAO,QAAO,EAEdE,IAKA,eAAeA,GAAc,CAC3B,MAAMC,EAAS,MAAMV,EAAa,EAC/B,KAAKW,GAAQ,CACZ,MAAMD,EAAS,CAAA,EACf,OAAAC,EAAK,IAAIC,GAAUF,EAAOE,EAAM,MAAQA,EAAM,EAAG,EAC1CF,CACb,CAAK,EACA,MAAMG,CAAK,EACRC,EAAU,CACd,CAAE,KAAM,kBAAmB,MAAO,OAAS,EAC3C,GAAG,OAAO,KAAKJ,CAAM,EAAE,IAAIE,IAClB,CAAE,KAAMA,EAAO,MAAOF,EAAOE,IACrC,CACL,EACEL,EAAO,QAAQO,CAAO,EACtBP,EAAO,OAAM,EACbQ,EAAW,EAAK,CAClB,CAKAX,EAAU,iBAAiB,SAAU,MAAMY,GAAK,CAC9C,GAAIA,EAAE,OAAO,QAAU,QAAS,CAC9BX,EAAW,UAAY,GACvB,MACD,CAEDU,IACA,MAAMb,EAAgBc,EAAE,OAAO,KAAK,EACjC,KAAKC,CAAc,EACnB,MAAMJ,CAAK,EACX,QAAQ,IAAME,EAAW,EAAK,CAAC,CACpC,CAAC,EAMD,SAASF,EAAMK,EAAK,CAClBC,EAAS,MAAM,CACb,MAAO,QACP,WAAY,MACZ,QAASD,EAAI,QACb,aAAc,MACd,SAAU,WACV,MAAO,GACP,aAAc,GACd,iBAAkB,MAClB,KAAM,KACN,QAAS,IACb,CAAG,EACDb,EAAW,UAAY,EACzB,CAMA,SAASY,EAAeN,EAAM,CAC5B,MAAMS,EAAST,EAAK,IACdU,EAAYV,EAAK,OAAO,GAC9BN,EAAW,UAAY;AAAA,4BACGgB,EAAU;AAAA;AAAA,kBAEpBD,WAAgBC,EAAU;AAAA;AAAA,aAE/BA,EAAU;AAAA;AAAA,+BAEQA,EAAU;AAAA,kCACPA,EAAU;AAAA,oCACRA,EAAU;AAAA;AAAA;AAAA;AAAA,GAK9C,CAMA,SAASN,EAAWO,EAAO,GAAM,CAC/BhB,EAAU,MAAM,QAAUgB,EAAO,QAAU,MAC7C"}